/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/quill-resize-image@1.0.5/dist/quill-resize-image.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var t={exports:{}},e=t.exports=function(){function t(t){if(t&&"undefined"!=typeof window){var e=document.createElement("style");return e.setAttribute("media","screen"),e.innerHTML=t,document.head.appendChild(e),t}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},e(t,i)};function i(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}var n=function(){return n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},n.apply(this,arguments)};t('#editor-resizer {\n  position: absolute;\n  border: 1px dashed #fff;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n#editor-resizer .handler {\n  position: absolute;\n  right: -5px;\n  bottom: -5px;\n  width: 10px;\n  height: 10px;\n  border: 1px solid #333;\n  background-color: rgba(255, 255, 255, 0.8);\n  cursor: nwse-resize;\n  user-select: none;\n}\n#editor-resizer .toolbar {\n  position: absolute;\n  top: -5em;\n  left: 50%;\n  padding: 0.5em;\n  border: 1px solid #fff;\n  border-radius: 3px;\n  background-color: #fff;\n  box-shadow: 0 0 3px rgba(0, 0, 0, 0.5);\n  transform: translateX(-50%);\n  width: 20em;\n}\n#editor-resizer .toolbar .group {\n  display: flex;\n  border: 1px solid #aaa;\n  border-radius: 6px;\n  white-space: nowrap;\n  text-align: center;\n  line-height: 2;\n  color: rgba(0, 0, 0, 0.65);\n}\n#editor-resizer .toolbar .group:not(:first-child) {\n  margin-top: 0.5em;\n}\n#editor-resizer .toolbar .group .btn {\n  flex: 1 0 0;\n  text-align: center;\n  width: 25%;\n  padding: 0 0.5rem;\n  display: inline-block;\n  vertical-align: top;\n  user-select: none;\n  color: inherit;\n}\n#editor-resizer .toolbar .group .btn:not(:last-child) {\n  border-right: 1px solid #bbb;\n}\n#editor-resizer .toolbar .group .btn:not(.btn-group):active {\n  background-color: rgba(0, 0, 0, 0.1);\n}\n#editor-resizer .toolbar .group .input-wrapper {\n  width: 25%;\n  border: 1px solid #eee;\n  position: relative;\n  border-right: 1px solid #bbb;\n  min-width: 4em;\n}\n#editor-resizer .toolbar .group .input-wrapper::after {\n  content: " ";\n  position: absolute;\n  height: 1px;\n  background-color: #333;\n  left: 0.5em;\n  right: 1em;\n  bottom: 0.2em;\n}\n#editor-resizer .toolbar .group .input-wrapper input {\n  color: inherit;\n  text-align: center;\n  width: 100%;\n  border: none;\n  outline: none;\n  padding: 0 0.5em;\n  padding-right: 1.5em;\n}\n#editor-resizer .toolbar .group .input-wrapper input:focus ~ .tooltip {\n  display: block;\n}\n#editor-resizer .toolbar .group .input-wrapper .suffix {\n  position: absolute;\n  right: 0.5em;\n}\n#editor-resizer .toolbar .group .input-wrapper .tooltip {\n  display: none;\n  position: absolute;\n  top: 100%;\n  left: 0;\n  font-size: small;\n  background-color: #fff;\n  box-shadow: 0 0 3px #a7a7a7;\n  padding: 0 0.6em;\n  border-radius: 5px;\n  zoom: 0.85;\n}\n');var r=function(){function t(t){this.config=n(n({},o),t)}return t.prototype.findLabel=function(t){return this.config?Reflect.get(this.config,t):null},t}(),o={floatLeft:"left",floatRight:"right",center:"center",restore:"restore",altTip:"Press and hold alt to lock ratio!",inputTip:"Press enter key to apply change!"};function s(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return t.replace(/\{(\d+)\}/g,(function(t,i){return e.length>i?e[i]:""}))}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.originSize=null,e}i(e,t)}(HTMLElement);var a='\n<div class="handler" title="{0}"></div>\n<div class="toolbar">\n  <div class="group">\n    <a class="btn" data-type="width" data-styles="width:100%">100%</a>\n    <a class="btn" data-type="width" data-styles="width:50%">50%</a>\n    <span class="input-wrapper"><input data-type="width" maxlength="3" /><span class="suffix">%</span><span class="tooltip">{5}</span></span>\n    <a class="btn" data-type="width" data-styles="width:auto">{4}</a>\n  </div>\n  <div class="group">\n    <a class="btn" data-type="align" data-styles="float:left">{1}</a>\n    <a class="btn" data-type="align" data-styles="display:block;margin:auto;">{2}</a>\n    <a class="btn" data-type="align" data-styles="float:right;">{3}</a>\n    <a class="btn" data-type="align" data-styles="">{4}</a>\n  </div>\n</div>\n',l=function(){function t(t,e,i,n){this.resizer=null,this.startResizePosition=null,this.i18n=new r((null==n?void 0:n.locale)||o),this.options=n,this.resizeTarget=t,t.originSize||(t.originSize={width:t.clientWidth,height:t.clientHeight}),this.editor=i,this.container=e,this.initResizer(),this.positionResizerToTarget(t),this.resizing=this.resizing.bind(this),this.endResize=this.endResize.bind(this),this.startResize=this.startResize.bind(this),this.toolbarClick=this.toolbarClick.bind(this),this.toolbarInputChange=this.toolbarInputChange.bind(this),this.onScroll=this.onScroll.bind(this),this.bindEvents()}return t.prototype.initResizer=function(){var t=this.container.querySelector("#editor-resizer");t||((t=document.createElement("div")).setAttribute("id","editor-resizer"),t.innerHTML=s(a,this.i18n.findLabel("altTip"),this.i18n.findLabel("floatLeft"),this.i18n.findLabel("center"),this.i18n.findLabel("floatRight"),this.i18n.findLabel("restore"),this.i18n.findLabel("inputTip")),this.container.appendChild(t)),this.resizer=t},t.prototype.positionResizerToTarget=function(t){null!==this.resizer&&(this.resizer.style.setProperty("left",t.offsetLeft+"px"),this.resizer.style.setProperty("top",t.offsetTop-this.editor.scrollTop+"px"),this.resizer.style.setProperty("width",t.clientWidth+"px"),this.resizer.style.setProperty("height",t.clientHeight+"px"))},t.prototype.bindEvents=function(){null!==this.resizer&&(this.resizer.addEventListener("mousedown",this.startResize),this.resizer.addEventListener("click",this.toolbarClick),this.resizer.addEventListener("change",this.toolbarInputChange)),window.addEventListener("mouseup",this.endResize),window.addEventListener("mousemove",this.resizing),this.editor.addEventListener("scroll",this.onScroll)},t.prototype.onScroll=function(){this.positionResizerToTarget(this.resizeTarget)},t.prototype._setStylesForToolbar=function(t,e){var i,n="_styles_"+t,r=this.resizeTarget.style,o=this.resizeTarget[n];r.cssText=r.cssText.replaceAll(" ","").replace(o,"")+";"+e,this.resizeTarget[n]=e,this.positionResizerToTarget(this.resizeTarget),null===(i=this.options)||void 0===i||i.onChange(this.resizeTarget)},t.prototype.toolbarInputChange=function(t){var e,i=t.target,n=null===(e=null==i?void 0:i.dataset)||void 0===e?void 0:e.type,r=i.value;n&&Number(r)&&this._setStylesForToolbar(n,"width: "+Number(r)+"%;")},t.prototype.toolbarClick=function(t){var e,i,n=t.target,r=null===(e=null==n?void 0:n.dataset)||void 0===e?void 0:e.type;r&&n.classList.contains("btn")&&this._setStylesForToolbar(r,null===(i=null==n?void 0:n.dataset)||void 0===i?void 0:i.styles)},t.prototype.startResize=function(t){t.target.classList.contains("handler")&&1===t.which&&(this.startResizePosition={left:t.clientX,top:t.clientY,width:this.resizeTarget.clientWidth,height:this.resizeTarget.clientHeight})},t.prototype.endResize=function(){var t;this.startResizePosition=null,null===(t=this.options)||void 0===t||t.onChange(this.resizeTarget)},t.prototype.resizing=function(t){if(this.startResizePosition){var e=t.clientX-this.startResizePosition.left,i=t.clientY-this.startResizePosition.top,n=this.startResizePosition.width,r=this.startResizePosition.height;if(n+=e,r+=i,t.altKey){var o=this.resizeTarget.originSize;r=o.height/o.width*n}this.resizeTarget.style.setProperty("width",Math.max(n,30)+"px"),this.resizeTarget.style.setProperty("height",Math.max(r,30)+"px"),this.positionResizerToTarget(this.resizeTarget)}},t.prototype.destory=function(){this.container.removeChild(this.resizer),window.removeEventListener("mouseup",this.endResize),window.removeEventListener("mousemove",this.resizing),this.editor.removeEventListener("scroll",this.onScroll),this.resizer=null},t}(),d=function(){function t(t,e){this.element=t,this.cb=e,this.hasTracked=!1}return t}(),h=function(){function t(){}return t.track=function(e,i){this.iframes.push(new d(e,i)),this.interval||(this.interval=setInterval((function(){t.checkClick()}),this.resolution))},t.checkClick=function(){if(document.activeElement){var t=document.activeElement;for(var e in this.iframes)t===this.iframes[e].element?0==this.iframes[e].hasTracked&&(this.iframes[e].cb.apply(window,[]),this.iframes[e].hasTracked=!0):this.iframes[e].hasTracked=!1}},t.resolution=200,t.iframes=[],t.interval=null,t}();function p(t,e){var i,r,o=t.root;function s(){var e=(new(0,t.getContents().constructor)).retain(1);t.updateContents(e)}o.addEventListener("click",(function(t){var a=t.target;t.target&&["img","video"].includes(a.tagName.toLowerCase())&&(i=a,r=new l(a,o.parentElement,o,n(n({},e),{onChange:s})))})),t.on("text-change",(function(t,a){o.querySelectorAll("iframe").forEach((function(t){h.track(t,(function(){i=t,r=new l(t,o.parentElement,o,n(n({},e),{onChange:s}))}))}))})),document.addEventListener("mousedown",(function(t){var e,n,o,s=t.target;s===i||(null===(n=null===(e=null==r?void 0:r.resizer)||void 0===e?void 0:e.contains)||void 0===n?void 0:n.call(e,s))||(null===(o=null==r?void 0:r.destory)||void 0===o||o.call(r),r=null,i=null)}),{capture:!0})}return p}();export{e as default};
